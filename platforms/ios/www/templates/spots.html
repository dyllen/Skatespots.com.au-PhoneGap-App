
<ion-view title="{{currentType}}s - {{currentRefine}}">
  <ion-nav-buttons side="left">
    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>

  <ion-nav-buttons side="right">
    <button ng-click="sortResults()" class="button button-icon icon ion-levels"></button>
  </ion-nav-buttons>

  <div class="bar bar-subheader refine_bar">
        <div class="button-bar">
          <a class="button refine-state" ng-click="selectState()">{{currentState}}</a>
          <a class="button refine-nearby active" ng-click="getNearby()"><i class="ion-navigate"></i>Nearby</a>
        </div>
<div class="map-toggle">
  <div class="map-list"><span>show map</span> <i class="ion-map"></i></div>
  <div class="map-large" ng-hide="loadingMap"><i class="ion-android-drawer"></i>
  </div>
    </div>
</div>
  <ion-content class="has-header has-subheader spot-list" data-ng-init="getNearby()">
  <!-- <div class="refine_bar row">
        <div class="col state refine-btn refine-state" ng-click="selectState()">{{currentState}}</div>
        <div class="col refine-btn refine-nearby active" ng-click="getNearby()"><span class="or">OR</span><i class="ion-navigate"></i>Nearby</div>
    </div> -->
    <div class="loading-map-cnt">
      <div class="loading-map" ng-show="loadingMap"><i class="icon ion-loading-c"></i> loading map</div>
    </div>
    <div class="list map-preview all-spots" ng-show="mapPreview">
      <a class="item item-avatar" href="#/app/playlists/{{mapPreview.id}}">
        <div class="preview-img" style="background:url({{mapPreview.thumbnail}}); background-size: cover;"></div>
        <h2 ng-bind-html="mapPreview.title"></h2>
        <p>{{mapPreview.address}}</p>
        <i class="ion-chevron-right"></i>
      </a>
  </div>

  <div data-tap-disabled="true">
    <div id="listMap" style="width:100%; height:600px;"></div>
  </div>
   <button ng-show="loading" class="loader button button-full button-light">
      <i class="icon ion-loading-c"></i>
    </button>
    <ion-list class="spots-list">
    <a class="item item-thumbnail-left" collection-repeat="Spot in Spots | orderBy:predicate" collection-item-width="'100%'" collection-item-height="130" href="#/app/playlists/{{Spot.id}}">
       <i class="rank-icon"></i>
        <div class="preview-img" style="background:url({{Spot.thumbnail}}) center center; background-size: cover;"></div>
        <h2 ng-bind-html="Spot.title"></h2>
        <p>{{Spot.address}} {{Spot.suburb}}{{Spot.distance}}</p>
        <span class="btn_blue">Check it out</span>
      </a>
    </ion-list>
   <!--  <div ng-hide="loading" id="loader" class="loader">{{loadedMessage}}</div> -->

<script id="my-modal.html" type="text/ng-template">
  <div class="modal error-modal">
    <ion-header-bar>
      <h1 class="title">GNARLY SERVER ERROR!</h1>
    </ion-header-bar>
    <ion-content>
      <p class="error-text">Looks like our server is under heavy load at the moment. Please retry in a few minutes<br/>
        <a onclick="location.reload()" class="btn_blue">RELOAD</a>
      </p>
    </ion-content>
  </div>
</script>

  </ion-content>
</ion-view>